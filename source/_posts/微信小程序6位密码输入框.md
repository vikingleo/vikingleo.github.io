---
title: 微信小程序6位密码输入框
tags:
  - 微信小程序
categories:
  - 微信小程序
toc: true
date: 2019-01-29 16:50:22
---

# 原理

用一层input覆盖在6格上，全透明，声明2个变量，一个绑定6格，一个绑定input，监听input

<!-- more -->

**存在bug: 无法监听是从第几位删除，所以只能全输入后给一个清空按钮，比较稳妥**

# wxml

```html
<view class="pos-r">
            <view class=" d-flex mx-1-reverse mt-1">
                <view class="px-1 flex-1">
                    <view class="bg-grey200 d-flex justify-content-center align-items-center" style="height:80rpx;">{{passwordText[0]}}</view>
                </view>
                <view class="px-1 flex-1">
                    <view class="bg-grey200 d-flex justify-content-center align-items-center" style="height:80rpx;">{{passwordText[1]}}</view>
                </view>
                <view class="px-1 flex-1">
                    <view class="bg-grey200 d-flex justify-content-center align-items-center" style="height:80rpx;">{{passwordText[2]}}</view>
                </view>
                <view class="px-1 flex-1">
                    <view class="bg-grey200 d-flex justify-content-center align-items-center" style="height:80rpx;">{{passwordText[3]}}</view>
                </view>
                <view class="px-1 flex-1">
                    <view class="bg-grey200 d-flex justify-content-center align-items-center" style="height:80rpx;">{{passwordText[4]}}</view>
                </view>
                <view class="px-1 flex-1">
                    <view class="bg-grey200 d-flex justify-content-center align-items-center" style="height:80rpx;">{{passwordText[5]}}</view>
                </view>
            </view>

            <input type="password" bindinput="watchInput" value="{{password}}" maxlength="6" auto-focus="true" focus="true" disabled="{{inputDisabled}}" data-model="password"
                   class="pwd-input pos-a full-height bg-grey200"></input>
        </view>
```

# js
```js
Page({

    /**
     * 页面的初始数据
     */
    data: {
        password: null,
        passwordText: null,
    },
    /**
     * 监听文本框
     */
    watchInput: function (e) {
        let that = this
        let model = e.currentTarget.dataset.model
        let value = !e.detail.value ? null : e.detail.value
        let arr = value ? value.split('') : null
        let passwordText = []
        if (arr) {

            for (let i = 0; i < arr.length; i++) {
                passwordText.push('●')
            }
        }
        that.setData({
            passwordText,
            password: value
        })
    },
})
```

# wxss
```css
.page-inputPwd .pwd-input {
    opacity: 0;
    right: -50vw;
    top: 0;
    z-index: 1;
    width: 200vw;
}
```